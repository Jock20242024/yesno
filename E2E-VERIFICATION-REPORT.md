# E2E 功能验证测试报告

**测试日期:** 2024-12-16  
**测试环境:** http://localhost:3000

---

## 📋 测试场景

### ✅ 场景 2: 注册与充值

**测试步骤:**
1. 注册新用户 A (`testuser@verify.com`)
2. 充值 $1000

**预期结果:**
- 用户 A 余额 = `$1000.00`

**实际结果:** ⏳ 待测试

---

### ✅ 场景 3-4: 交易与锁定

**测试步骤:**
1. Admin 创建市场 M1 (5% 费率)
2. 用户 A 下注 YES $100
3. 用户 A 提交提现请求 $500

**预期结果:**
- 用户 A 余额 = `$400.00` (1000 - 100 - 500)

**实际结果:** ⏳ 待测试

---

### ✅ 场景 5: 核心清算

**测试步骤:**
1. Admin 清算市场 M1，选择结果 YES

**预期结果:**
- 用户 A 余额 = `$495.00`

**余额计算:**
- 初始余额: $400.00
- 下注净投资: $95.00 (扣除 5% 手续费)
- 市场总池: $95.00
- 回报率: 1.0 (因为只有一笔下注)
- 回报金额: $95.00
- **最终余额: $400 + $95 = $495.00**

**实际结果:** ⏳ 待测试

---

### ✅ 场景 6: 提现审批

**测试步骤:**
1. Admin 审批用户 A 的 $500 提现请求

**预期结果:**
- 用户 A 余额保持 `$495.00` 不变（因为钱已在提交时扣除）

**实际结果:** ⏳ 待测试

---

## 📊 验证数据点

| 场景 | 验证点 | 预期值 | 实际值 | 状态 |
|------|--------|--------|--------|------|
| 场景 2 | 用户 A 余额 | $1000.00 | - | ⏳ 待测试 |
| 场景 3-4 | 用户 A 余额 | $400.00 | - | ⏳ 待测试 |
| 场景 5 | 用户 A 余额 | $495.00 | - | ⏳ 待测试 |
| 场景 6 | 用户 A 余额 | $495.00 | - | ⏳ 待测试 |

---

## 🧪 测试指南

请按照 `scripts/e2e-test-manual.md` 中的详细步骤进行测试。

### 快速开始

1. **访问应用:**
   - 前端: http://localhost:3000
   - Admin 登录: http://localhost:3000/admin/login

2. **Admin 凭证:**
   - Email: `yesno@yesno.com`
   - Password: `yesno2025`

3. **按照场景顺序执行测试**

4. **使用 SQL 验证数据:**
   ```sql
   SELECT id, email, balance FROM users WHERE email = 'testuser@verify.com';
   ```

---

## 📝 测试结果记录

完成测试后，请更新本报告中的"实际值"和"状态"列。

---

**报告生成时间:** 2024-12-16

