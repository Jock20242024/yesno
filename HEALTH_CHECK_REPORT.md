# å…¨å±€å¥åº·æ£€æŸ¥æŠ¥å‘Š

## ğŸ“‹ æ£€æŸ¥æ—¶é—´
2024-12-22

## ğŸ” æ£€æŸ¥èŒƒå›´
- `app/` ç›®å½•
- `components/` ç›®å½•

---

## âš ï¸ å¯ç–‘æ–‡ä»¶åˆ—è¡¨

### 1. å¤‡ä»½æ–‡ä»¶

#### ğŸ”´ **app/wallet/page_original_backup.tsx**
- **ç±»å‹**: å¤‡ä»½æ–‡ä»¶
- **æè¿°**: é’±åŒ…é¡µé¢çš„åŸå§‹å¤‡ä»½æ–‡ä»¶
- **å»ºè®®**: 
  - å¦‚æœå½“å‰ `page.tsx` å·¥ä½œæ­£å¸¸ï¼Œå¯ä»¥è€ƒè™‘åˆ é™¤æ­¤å¤‡ä»½æ–‡ä»¶
  - æˆ–è€…å°†å…¶ç§»è‡³é¡¹ç›®å¤–çš„å¤‡ä»½ç›®å½•
  - **é£é™©**: ä½ï¼ˆåªæ˜¯å¤‡ä»½æ–‡ä»¶ï¼Œä¸å½±å“è¿è¡Œï¼‰

---

### 2. é‡å¤çš„ API è·¯ç”±ç³»ç»Ÿ

#### ğŸ”´ **app/api/auth/** vs **app/api/auth-core/**
è¿™ä¸¤ä¸ªç›®å½•å®ç°äº†ç›¸åŒçš„è®¤è¯ç«¯ç‚¹ï¼š

**app/api/auth/** (æ–°ç³»ç»Ÿ - NextAuth):
- `login/route.ts`
- `logout/route.ts`
- `me/route.ts`
- `register/route.ts`
- `[...nextauth]/route.ts` (NextAuth é…ç½®)

**app/api/auth-core/** (æ—§ç³»ç»Ÿ - è‡ªå®šä¹‰è®¤è¯):
- `login/route.ts`
- `logout/route.ts`
- `me/route.ts`
- `register/route.ts`

**é—®é¢˜åˆ†æ**:
- ä¸¤ä¸ªç³»ç»ŸåŒæ—¶å­˜åœ¨ï¼Œå¯èƒ½å¯¼è‡´è·¯ç”±å†²çª
- éœ€è¦ç¡®è®¤å“ªä¸ªç³»ç»Ÿæ­£åœ¨ä½¿ç”¨ä¸­
- å¦‚æœ `auth-core` æ˜¯æ—§ç³»ç»Ÿï¼Œåº”è¯¥æ ‡è®°ä¸ºåºŸå¼ƒæˆ–åˆ é™¤

**å»ºè®®**:
- âœ… æ£€æŸ¥ä»£ç åº“ä¸­å“ªäº›åœ°æ–¹å¼•ç”¨äº† `auth-core`
- âœ… å¦‚æœæ‰€æœ‰ä»£ç éƒ½å·²è¿ç§»åˆ° `auth`ï¼ˆNextAuthï¼‰ï¼Œå¯ä»¥åˆ é™¤ `auth-core` ç›®å½•
- âš ï¸ å¦‚æœä»æœ‰ä»£ç åœ¨ä½¿ç”¨ `auth-core`ï¼Œéœ€è¦å…ˆè¿ç§»å†åˆ é™¤

---

### 3. å¯èƒ½çš„é‡å¤ç»„ä»¶

#### ğŸŸ¡ **components/MarketTable.tsx** vs **app/admin/markets/components/MarketTable.tsx**

**å‘ç°**:
- å­˜åœ¨ä¸¤ä¸ª `MarketTable` ç»„ä»¶
- `components/MarketTable.tsx` - ä½äºå…¨å±€ç»„ä»¶ç›®å½•
- `app/admin/markets/components/MarketTable.tsx` - ä½äº admin ç‰¹å®šç›®å½•

**æ£€æŸ¥ç»“æœ**:
- æ ¹æ® grep ç»“æœï¼Œadmin é¡µé¢ä½¿ç”¨çš„æ˜¯ `app/admin/markets/components/MarketTable.tsx`
- `components/MarketTable.tsx` çš„ä½¿ç”¨æƒ…å†µéœ€è¦è¿›ä¸€æ­¥ç¡®è®¤

**å»ºè®®**:
- âœ… æ£€æŸ¥ `components/MarketTable.tsx` æ˜¯å¦ä»åœ¨ä½¿ç”¨
- âœ… å¦‚æœæœªè¢«ä½¿ç”¨ï¼Œå¯ä»¥è€ƒè™‘åˆ é™¤æˆ–åˆå¹¶
- âš ï¸ å¦‚æœä¸¤è€…åŠŸèƒ½ç›¸ä¼¼ï¼Œåº”è¯¥åˆå¹¶ä¸ºä¸€ä¸ªç»„ä»¶

---

### 4. å…¶ä»–å‘ç°

#### âœ… æ— å…¶ä»–æ˜æ˜¾çš„é‡å¤æ–‡ä»¶

ä»¥ä¸‹ç»„ä»¶è™½ç„¶åç§°ç›¸ä¼¼ï¼Œä½†ç”¨é€”ä¸åŒï¼ˆåˆç†ï¼‰ï¼š
- `components/MarketCard.tsx` - å¸‚åœºå¡ç‰‡å±•ç¤º
- `components/MarketTable.tsx` - å¸‚åœºè¡¨æ ¼ï¼ˆéœ€ç¡®è®¤æ˜¯å¦ä½¿ç”¨ï¼‰
- `app/admin/markets/components/MarketTable.tsx` - Admin ä¸“ç”¨çš„å¸‚åœºè¡¨æ ¼

ä»¥ä¸‹ç»„ä»¶åç§°ç›¸ä¼¼ä½†åŠŸèƒ½æ˜ç¡®åŒºåˆ†ï¼š
- `components/wallet/PositionsTable.tsx` - æŒä»“è¡¨æ ¼
- `components/wallet/FundingTable.tsx` - èµ„é‡‘è®°å½•è¡¨æ ¼
- `components/profile/OrderHistoryTable.tsx` - è®¢å•å†å²è¡¨æ ¼
- `components/user/UserActivityTable.tsx` - ç”¨æˆ·æ´»åŠ¨è¡¨æ ¼

---

## ğŸ“Š ç»Ÿè®¡ä¿¡æ¯

### API è·¯ç”±ç»Ÿè®¡
- æ€»è·¯ç”±æ–‡ä»¶æ•°: 103
- ç–‘ä¼¼é‡å¤ç³»ç»Ÿ: 2 (auth vs auth-core)

### ç»„ä»¶ç»Ÿè®¡
- æ€»ç»„ä»¶æ–‡ä»¶æ•°: ~60
- ç–‘ä¼¼é‡å¤ç»„ä»¶: 1-2 (MarketTable)

---

## ğŸ¯ ä¼˜å…ˆçº§å»ºè®®

### ğŸ”´ é«˜ä¼˜å…ˆçº§
1. **å¤„ç† auth-core é—ç•™ç³»ç»Ÿ**
   - æ£€æŸ¥æ˜¯å¦ä»æœ‰ä»£ç åœ¨ä½¿ç”¨
   - å¦‚æœæ²¡æœ‰ä½¿ç”¨ï¼Œåˆ é™¤æ•´ä¸ª `app/api/auth-core/` ç›®å½•
   - å¦‚æœæœ‰ä½¿ç”¨ï¼Œåˆ¶å®šè¿ç§»è®¡åˆ’

### ğŸŸ¡ ä¸­ä¼˜å…ˆçº§
2. **æ¸…ç†å¤‡ä»½æ–‡ä»¶**
   - åˆ é™¤ `app/wallet/page_original_backup.tsx`
   - æˆ–ç§»è‡³é¡¹ç›®å¤–çš„å¤‡ä»½ç›®å½•

3. **ç¡®è®¤ MarketTable ç»„ä»¶**
   - æ£€æŸ¥ `components/MarketTable.tsx` çš„ä½¿ç”¨æƒ…å†µ
   - å¦‚æœæœªä½¿ç”¨ï¼Œåˆ é™¤
   - å¦‚æœä½¿ç”¨ï¼Œè€ƒè™‘æ˜¯å¦åº”è¯¥åˆå¹¶åˆ° admin ç‰ˆæœ¬

---

## âœ… å¥åº·çŠ¶æ€

### æ€»ä½“è¯„ä¼°: ğŸŸ¡ è‰¯å¥½ï¼Œä½†æœ‰æ”¹è¿›ç©ºé—´

- âœ… å¤§éƒ¨åˆ†ä»£ç ç»“æ„æ¸…æ™°
- âœ… æ²¡æœ‰å‘ç°ä¸¥é‡çš„ä»£ç é‡å¤
- âš ï¸ å­˜åœ¨é—ç•™çš„è®¤è¯ç³»ç»Ÿï¼ˆauth-coreï¼‰éœ€è¦æ¸…ç†
- âš ï¸ å­˜åœ¨ä¸€ä¸ªå¤‡ä»½æ–‡ä»¶éœ€è¦å¤„ç†

---

## ğŸ“ ä¸‹ä¸€æ­¥è¡ŒåŠ¨

1. æ‰§è¡Œä»£ç æœç´¢ï¼Œç¡®è®¤ `auth-core` çš„ä½¿ç”¨æƒ…å†µ
2. ç¡®è®¤ `components/MarketTable.tsx` çš„ä½¿ç”¨æƒ…å†µ
3. æ ¹æ®ç¡®è®¤ç»“æœï¼Œæ‰§è¡Œæ¸…ç†æ“ä½œ
